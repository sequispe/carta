<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>quispe</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Poppins',sans-serif;
  background:url("img/Fondo2.jpg") repeat;
  background-size:cover;
  margin:0;
  color:#45270a;
  text-align:center;
  scroll-behavior:smooth;
  padding-top:42px;
}

/* TELEPROMPTER */
#teleprompter{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:42px;
  background:#806250;
  color:#fff;
  overflow:hidden;
  z-index:2000;
  display:flex;
  align-items:center;
}

#teleprompterText{
  white-space:nowrap;
  padding-left:100%;
  font-size:14px;
  font-weight:600;
  animation:mover linear infinite;
}

@keyframes mover{
  from{transform:translateX(0)}
  to{transform:translateX(-100%)}
}

/* HEADER */
header{
  width:100%;
  height:220px;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}

header img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* BANNER */
.banner{
  font-family:'Playfair Display',serif;
  padding:12px 18px;
  font-size:clamp(1.2rem,2.5vw,1.6rem);
  font-weight:600;
  background:rgba(255,255,255,.85);
  border-radius:10px;
  margin:15px auto;
  width:fit-content;
}

/* IDIOMAS */
#languageSwitcher{
  display:flex;
  justify-content:center;
  gap:10px;
  margin:10px 0;
}

.lang-btn{
  background:#806250;
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}

.lang-btn.active{
  background:#a07b68;
}

/* BUSCADOR */
.search-box{
  display:flex;
  justify-content:center;
  gap:10px;
  margin:15px;
}

.search-box input{
  padding:10px;
  width:60%;
  border-radius:8px;
  border:1px solid #ccc;
}

/* CATEGOR√çAS */
#category-buttons{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:12px;
  margin:18px;
}

#category-buttons button{
  background:linear-gradient(135deg,#9a7b65,#7a5a46);
  color:#fff;
  border:none;
  border-radius:999px;
  padding:10px 18px;
  cursor:pointer;
}

/* PRODUCTOS */
#product-list{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:15px;
}

.item{
  background:#fff;
  border-radius:14px;
  width:min(420px,100%);
  box-shadow:0 2px 10px rgba(0,0,0,.15);
}

.item img{
  width:100%;
  height:180px;
  object-fit:cover;
}

/* BOTONES FLOTANTES */
#btnUp,#btnSound{
  position:fixed;
  right:20px;
  width:45px;
  height:45px;
  border-radius:50%;
  border:none;
  font-size:20px;
  cursor:pointer;
  background:#8c6954;
  color:white;
}

#btnUp{bottom:25px;display:none}
#btnSound{bottom:80px}
</style>
</head>

<body>

<div id="teleprompter">
  <div id="teleprompterText"></div>
</div>

<header>
  <img src="img/logi1.jpg" alt="quispe">
</header>

<div class="banner" id="banner-text">¬°Bienvenidos!</div>

<div id="languageSwitcher">
  <button id="btn-es" class="lang-btn">üá™üá∏</button>
  <button id="btn-en" class="lang-btn">üá¨üáß</button>
  <button id="btn-pt" class="lang-btn">üáßüá∑</button>
</div>

<div class="search-box">
  <input id="search" placeholder="Buscar...">
  <button id="btnSearch">Buscar</button>
</div>

<div id="category-buttons"></div>
<div id="product-list"></div>

<button id="btnUp">‚¨ÜÔ∏è</button>
<button id="btnSound">üîä</button>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* TELEPROMPTER */
fetch("teleprompter.json")
.then(r=>r.json())
.then(cfg=>{
  if(!cfg.activo) return;
  const t=document.getElementById("teleprompterText");
  t.textContent=cfg.texto;
  t.style.animationDuration=cfg.velocidad+"s";
});

/* SONIDO */
let sonido=localStorage.getItem("sonido")!=="off";
const btnSound=document.getElementById("btnSound");
btnSound.textContent=sonido?"üîä":"üîá";

btnSound.onclick=()=>{
  sonido=!sonido;
  localStorage.setItem("sonido",sonido?"on":"off");
  btnSound.textContent=sonido?"üîä":"üîá";
};

function playSound(src){
  if(!sonido) return;
  new Audio(src).play().catch(()=>{});
}

/* CONFIG */
const USER="sequispe";
const REPO="carta";
let idioma=localStorage.getItem("idioma")||"es";
let productos=[];

/* LOAD */
async function load(){
  const file=idioma==="en"?"productos-en.json":idioma==="pt"?"productos-port.json":"productos.json";
  const url=`https://raw.githubusercontent.com/${USER}/${REPO}/main/${file}`;
  const res=await fetch(url);
  productos=await res.json();
  renderCategories();
  renderProducts("Todos");
}

function renderCategories(){
  const cats=["Todos",...new Set(productos.map(p=>p.categoria))];
  const c=document.getElementById("category-buttons");
  c.innerHTML="";
  cats.forEach(cat=>{
    const b=document.createElement("button");
    b.textContent=cat;
    b.onclick=()=>renderProducts(cat);
    c.appendChild(b);
  });
}

function renderProducts(cat){
  const list=document.getElementById("product-list");
  list.innerHTML="";
  productos.filter(p=>cat==="Todos"||p.categoria===cat)
  .forEach(p=>{
    list.innerHTML+=`
      <div class="item">
        <img src="${p.imagen}">
        <h3>${p.nombre}</h3>
        <p>${p.descripcion||""}</p>
        <b>$${p.precio}</b>
      </div>`;
  });
}

/* BTN UP */
window.onscroll=()=>btnUp.style.display=scrollY>300?"block":"none";
btnUp.onclick=()=>scrollTo({top:0,behavior:"smooth"});

/* IDIOMAS */
btn-es.onclick=()=>{idioma="es";localStorage.setItem("idioma","es");load()};
btn-en.onclick=()=>{idioma="en";localStorage.setItem("idioma","en");load()};
btn-pt.onclick=()=>{idioma="pt";localStorage.setItem("idioma","pt");load()};

load();
});
</script>

</body>
</html>
